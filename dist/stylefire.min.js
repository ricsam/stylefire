!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.stylefire={})}(this,function(e){"use strict";var t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r=0,n="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(e){return window.requestAnimationFrame(e)}:function(e){var t=Date.now(),n=Math.max(0,16.7-(t-r));r=t+n,setTimeout(function(){return e(r)},n)};function a(e){var t=[],r=[],n=0,a=!1,o=0;return{cancel:function(e){var t=r.indexOf(e);-1!==t&&r.splice(t,1)},process:function(){for(a=!0,t=(e=[r,t])[0],(r=e[1]).length=0,n=t.length,o=0;o<n;o++)t[o]();var e;a=!1},schedule:function(o,s){void 0===s&&(s=!1),e();var i=s&&a,f=i?t:r;-1===f.indexOf(o)&&(f.push(o),i&&(n=t.length))}}}"undefined"!=typeof performance&&performance.now;var o=!1;function s(){o||(o=!0,n(c))}var i=a(s),f=a(s),u=a(s),l=a(s);function c(e){o=!1,i.process(),f.process(),u.process(),l.process()}var p,d=u.schedule,h=function(e){var t=e.onRead,r=e.onRender,n=e.aliasMap,a=void 0===n?{}:n,o=e.useCache,s=void 0===o||o;return function(e){var n={},o=[],i=!1,f=function(e,t){var r=a[e]||e,s=n[r];n[r]=t,n[r]!==s&&(-1===o.indexOf(r)&&o.push(r),i||(i=!0,d(u)))};function u(t){return void 0===t&&(t=!1),(t||i)&&(r(n,e,o),i=!1,o.length=0),this}return{get:function(r){var o=a[r]||r;return o?s&&void 0!==n[o]?n[o]:t(o,e):n},set:function(e,t){if("string"==typeof e){if(void 0===t)return function(t){return f(e,t)};f(e,t)}else for(var r in e)e.hasOwnProperty(r)&&f(r,e[r]);return this},render:u}}},g=/([a-z])([A-Z])/g,m=function(e){return e.replace(g,"$1-$2").toLowerCase()},v=new Map,w=new Map,y=["Webkit","Moz","O","ms",""],b=y.length,O=function(e,t){void 0===t&&(t=!1);var r=t?w:v;return r.has(e)||function(e){if("undefined"!=typeof document){p=p||document.createElement("div");for(var t=0;t<b;t++){var r=y[t],n=""===r,a=n?e:r+e.charAt(0).toUpperCase()+e.slice(1);a in p.style&&(v.set(e,a),w.set(e,(n?"":"-")+m(a)))}}}(e),r.get(e)||e},x=["","X","Y","Z"],k=["translate","scale","rotate","skew","transformPerspective"].reduce(function(e,t){return x.reduce(function(e,r){return e.push(t+r),e},e)},["x","y","z"]),Y=k.reduce(function(e,t){return e[t]=!0,e},{}),X=function(e){return!0===Y[e]},$=function(e,t){return k.indexOf(e)-k.indexOf(t)},L=function(e){return"transformOriginX"===e||"transformOriginY"===e};const M=(e,t)=>r=>Math.max(Math.min(r,t),e),C=e=>t=>"string"==typeof t&&0===t.indexOf(e),T={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},P=Object.assign({},T,{transform:M(0,1)}),Z=Object.assign({},T,{default:1}),j=e=>{const t=(e=>t=>"string"==typeof t&&-1!==t.indexOf(e))(e);return{test:e=>"string"==typeof e&&t(e)&&1===e.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}},R=j("deg"),S=j("%"),A=j("px"),E=M(0,255),F=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))$/i,H=e=>void 0!==e.red,N=e=>void 0!==e.hue,V=e=>{const t=e.length;return r=>{if("string"!=typeof r)return r;const n={},a=(e=>"string"==typeof e?e.split(/,\s*/):[e])((e=>e.substring(e.indexOf("(")+1,e.lastIndexOf(")")))(r));for(let r=0;r<t;r++)n[e[r]]=void 0!==a[r]?parseFloat(a[r]):1;return n}},z=Object.assign({},T,{transform:e=>Math.round(E(e))}),I=C("rgb"),q={test:e=>"string"==typeof e?I(e):H(e),parse:V(["red","green","blue","alpha"]),transform:({red:e,green:t,blue:r,alpha:n})=>(({red:e,green:t,blue:r,alpha$$1:n=1})=>`rgba(${e}, ${t}, ${r}, ${n})`)({red:z.transform(e),green:z.transform(t),blue:z.transform(r),alpha:n})},B=C("hsl"),W={test:e=>"string"==typeof e?B(e):N(e),parse:V(["hue","saturation","lightness","alpha"]),transform:({hue:e,saturation:t,lightness:r,alpha:n})=>(({hue:e,saturation:t,lightness:r,alpha$$1:n=1})=>`hsla(${e}, ${t}, ${r}, ${n})`)({hue:Math.round(e),saturation:S.transform(t),lightness:S.transform(r),alpha:n})},_=Object.assign({},q,{test:C("#"),parse:e=>{let t="",r="",n="";return e.length>4?(t=e.substr(1,2),r=e.substr(3,2),n=e.substr(5,2)):(t=e.substr(1,1),r=e.substr(2,1),n=e.substr(3,1),t+=t,r+=r,n+=n),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:1}}}),D={test:e=>"string"==typeof e&&F.test(e)||q.test(e)||W.test(e)||_.test(e),parse:e=>q.test(e)?q.parse(e):W.test(e)?W.parse(e):_.test(e)?_.parse(e):e,transform:e=>H(e)?q.transform(e):N(e)?W.transform(e):e};var G={color:D,backgroundColor:D,outlineColor:D,fill:D,stroke:D,borderColor:D,borderTopColor:D,borderRightColor:D,borderBottomColor:D,borderLeftColor:D,borderRadius:A,width:A,maxWidth:A,height:A,maxHeight:A,top:A,left:A,bottom:A,right:A,rotate:R,rotateX:R,rotateY:R,rotateZ:R,scale:Z,scaleX:Z,scaleY:Z,scaleZ:Z,skew:R,skewX:R,skewY:R,distance:A,translateX:A,translateY:A,translateZ:A,perspective:A,opacity:P,transformOriginX:S,transformOriginY:S,transformOriginZ:A},U=function(e){return G[e]},J="number",K="object",Q="transform-origin",ee="transform",te="translateZ",re=";transform: none",ne=function(e,t){return";"+e+":"+t};function ae(e,t,r,n){void 0===t&&(t=!0),void 0===r&&(r=!0);for(var a=!0===t?Object.keys(e):t,o="",s="",i=!1,f=!0,u=!1,l=!1,c=a.length,p=0;p<c;p++){var d=a[p];if(X(d)){for(var h in u=!0,e)X(h)&&-1===a.indexOf(h)&&a.push(h);break}}a.sort($);var g=a.length;for(p=0;p<g;p++){d=a[p];if(!n.has(d)){var m=X(d),v=e[d],w=U(d);m&&(w.default&&v!==w.default||!w.default&&0!==v)&&(f=!1),w&&(typeof v===J||typeof v===K)&&w.transform&&(v=w.transform(v)),m?(s+=d+"("+v+") ",l=d===te||l):L(d)?(e[d]=v,i=!0):o+=ne(O(d,!0),v)}}return i&&(o+=ne(Q,(e.transformOriginX||0)+" "+(e.transformOriginY||0)+" "+(e.transformOriginZ||0))),u&&(!l&&r&&(s+=te+"(0)"),o+=ne(ee,f?re:s)),o}var oe=new Set(["scrollLeft","scrollTop"]),se=h({onRead:function(e,t){var r=t.element,n=t.preparseOutput,a=U(e);if(X(e))return a&&a.default||0;if(oe.has(e))return r[e];var o=window.getComputedStyle(r,null).getPropertyValue(O(e,!0))||0;return n&&a&&a.parse?a.parse(o):o},onRender:function(e,t,r){var n=t.element,a=t.enableHardwareAcceleration;n.style.cssText+=ae(e,r,a,oe),-1!==r.indexOf("scrollLeft")&&(n.scrollLeft=e.scrollLeft),-1!==r.indexOf("scrollTop")&&(n.scrollTop=e.scrollTop)},aliasMap:{x:"translateX",y:"translateY",z:"translateZ",originX:"transformOriginX",originY:"transformOriginY",originZ:"transformOriginZ"},uncachedValues:oe}),ie=function(e,t){return e/100*t+"px"},fe={fill:D,stroke:D,scale:Z,scaleX:Z,scaleY:Z,opacity:P,fillOpacity:P,strokeOpacity:P},ue=h({onRead:function(e,t){var r=t.element;if(X(e)){var n=function(e){return fe[e]}(e);return n?n.default:0}return r.getAttribute(e)},onRender:function(e,t,r){var n=t.dimensions;!function(e,t){for(var r in t)t.hasOwnProperty(r)&&e.setAttribute(r,t[r])}(t.element,function(e,t,r,n){var a=!1,o=!1,s={},i=r?{pathLength:"0",pathSpacing:""+n}:void 0,f=void 0!==e.scale?e.scale||1e-7:e.scaleX||1,u=void 0!==e.scaleY?e.scaleY||1e-7:f||1,l=t.width*((e.originX||50)/100)+t.x,c=t.height*((e.originY||50)/100)+t.y,p=1*f*-l,d=1*u*-c,h=l/f,g=c/u,v={translate:"translate("+e.translateX+", "+e.translateY+") ",scale:"translate("+p+", "+d+") scale("+f+", "+u+") translate("+h+", "+g+") ",rotate:"rotate("+e.rotate+", "+l+", "+c+") ",skewX:"skewX("+e.skewX+") ",skewY:"skewY("+e.skewY+") "};for(var w in e)if(e.hasOwnProperty(w)){var y=e[w];X(w)?a=!0:!r||"pathLength"!==w&&"pathSpacing"!==w||"number"!=typeof y?r&&"pathOffset"===w?s["stroke-dashoffset"]=ie(-y,n):s[m(w)]=y:(o=!0,i[w]=ie(y,n))}if(o&&(s["stroke-dasharray"]=i.pathLength+" "+i.pathSpacing),a)for(var w in s.transform="",v)if(v.hasOwnProperty(w)){var b="scale"===w?"1":"0";s.transform+=v[w].replace(/undefined/g,b)}return s}(e,n,t.isPath,t.pathLength))},aliasMap:{x:"translateX",y:"translateY",background:"fill"}}),le=h({useCache:!1,onRead:function(e){return"scrollTop"===e?window.pageYOffset:window.pageXOffset},onRender:function(e){var t=e.scrollTop,r=void 0===t?0:t,n=e.scrollLeft,a=void 0===n?0:n;return window.scrollTo(a,r)}}),ce=function(){};"production"!==process.env.NODE_ENV&&(ce=function(e,t){if(!e)throw new Error("Hey, listen! ".toUpperCase()+t)});var pe=new WeakMap,de=function(e,r){var n;return e instanceof HTMLElement?n=function(e,r){return se(t({element:e,enableHardwareAcceleration:!0,preparseOutput:!0},r))}(e,r):e instanceof SVGElement?n=function(e){var t=e.getBBox(),r={element:e,dimensions:{x:t.x,y:t.y,width:t.width,height:t.height},isPath:!1};return"path"===e.tagName&&(r.isPath=!0,r.pathLength=e.getTotalLength()),ue(r)}(e):"undefined"!=typeof window&&e===window&&(n=le(e)),ce(void 0!==n,"No valid node provided. Node must be HTMLElement, SVGElement or window."),pe.set(e,n),n},he=function(e,t){return pe.has(e)?pe.get(e):de(e,t)};e.default=function(e,t){var r="string"==typeof e?document.querySelector(e):e;return he(r,t)},e.createStylerFactory=h,e.buildStyles=ae,Object.defineProperty(e,"__esModule",{value:!0})});
